<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="tw.edu.chit.model.Empl" table="empl" catalog="CIS">
        <id name="oid" type="java.lang.Integer">
            <column name="Oid" />
            <generator class="identity" />
        </id>
        <property name="idno" type="java.lang.String">
            <column name="idno" length="10" not-null="true" unique="true">
                <comment>身分證字號</comment>
            </column>
        </property>
        <property name="cname" type="java.lang.String">
            <column name="cname" length="20">
                <comment>中文姓名</comment>
            </column>
        </property>
        <property name="insno" type="java.lang.String">
            <column name="insno" length="12">
                <comment>保險證號</comment>
            </column>
        </property>
        <property name="ename" type="java.lang.String">
            <column name="ename" length="50">
                <comment>英文姓名</comment>
            </column>
        </property>
        <property name="sex" type="java.lang.String">
            <column name="sex" length="1">
                <comment>性別::1)男 2)女</comment>
            </column>
        </property>
        <property name="bdate" type="java.util.Date">
            <column name="bdate" length="10">
                <comment>生日</comment>
            </column>
        </property>
        <property name="unit" type="java.lang.String">
            <column name="unit" length="4">
                <comment>聘僱單位代碼(=CodeEmpl.idno)</comment>
            </column>
        </property>
        <property name="unit_module" type="java.lang.String">
            <column name="unit_module" length="4">
                <comment>行政單位代碼(=CODE_UNIT)</comment>
            </column>
        </property>
        
        <property name="category" type="java.lang.String">
            <column name="category" length="1">
                <comment>員工分類:: 1)專任教師 2)兼任教師 3)職員工 4)軍護教師</comment>
            </column>
        </property>
        <property name="pcode" type="java.lang.String">
            <column name="pcode" length="4">
                <comment>級職代碼::當員工分類=1、2(Select idno From CodeEmpl WHERE category='TeacherRole') 當員工分類=3、4(Select idno From CodeEmpl WHERE category='EmplRoleStaff')</comment>
            </column>
        </property>
        <property name="sname" type="java.lang.String">
            <column name="sname" length="30">
                <comment>本校職稱</comment>
            </column>
        </property>
        <property name="telephone" type="java.lang.String">
            <column name="telephone" length="30">
                <comment>住宅電話</comment>
            </column>
        </property>
        <property name="pzip" type="java.lang.String">
            <column name="pzip" length="5">
                <comment>戶籍郵遞區號</comment>
            </column>
        </property>
        <property name="paddr" type="java.lang.String">
            <column name="paddr" length="70">
                <comment>戶籍地址</comment>
            </column>
        </property>
        <property name="czip" type="java.lang.String">
            <column name="czip" length="5">
                <comment>現居郵遞區號</comment>
            </column>
        </property>
        <property name="caddr" type="java.lang.String">
            <column name="caddr" length="70">
                <comment>現居地址</comment>
            </column>
        </property>
        <property name="startDate" type="java.util.Date">
            <column name="StartDate" length="10">
                <comment>任職起始日</comment>
            </column>
        </property>
        <property name="endDate" type="java.util.Date">
            <column name="EndDate" length="10">
                <comment>任職結束日</comment>
            </column>
        </property>
        <property name="statusCause" type="java.lang.String">
            <column name="StatusCause" length="4">
                <comment>離職原因</comment>
            </column>
        </property>
        <property name="degree" type="java.lang.String">
            <column name="Degree" length="4">
                <comment>學歷</comment>
            </column>
        </property>
        <property name="status" type="java.lang.String">
            <column name="Status" length="1">
                <comment>任職狀況</comment>
            </column>
        </property>
        <property name="cellPhone" type="java.lang.String">
            <column name="CellPhone" length="30">
                <comment>行動電話</comment>
            </column>
        </property>
        <property name="email" type="java.lang.String">
            <column name="Email">
                <comment>E-mail</comment>
            </column>
        </property>
        <property name="tutor" type="java.lang.String">
            <column name="Tutor" length="4">
                <comment>兼任導師代碼</comment>
            </column>
        </property>
        <property name="director" type="java.lang.String">
            <column name="Director" length="4">
                <comment>兼任主管代碼</comment>
            </column>
        </property>
        <property name="teachStartDate" type="java.util.Date">
            <column name="TeachStartDate" length="10">
                <comment>任教職日</comment>
            </column>
        </property>
        <property name="remark" type="java.lang.String">
            <column name="Remark" length="65535" />
        </property>
        <property name="adate" type="java.util.Date">
            <column name="Adate" length="10">
                <comment>最初到職日</comment>
            </column>
        </property>
        <property name="workShift" type="java.lang.String">
            <column name="WorkShift" length="2">
                <comment>所屬的基本班別</comment>
            </column>
        </property>        
        <property name="portrait" type="java.sql.Blob">
            <column name="portrait" />
        </property>
        
        <!-- DO NOT REMOVED BELOW CODES, TKS. -->
        <!-- 1對1 Mapping -->
        <one-to-one name="location" cascade="all" outer-join="true" 
        	class="tw.edu.chit.model.TeacherOfficeLocation" />	
		        	
       	<!-- 1對多 Mapping -->
        <list name="stayTime" inverse="true" table="TeacherStayTime" cascade="all, delete-orphan">
            <key column="parentOid" />
            <index column="pos" />
            <one-to-many class="tw.edu.chit.model.TeacherStayTime" />
            <filter name="yearFilterDef" condition=":yearCondition = schoolYear"></filter>
            <filter name="termFilter"
            	condition=":termCondition = (SELECT p.value FROM Parameter p WHERE p.name = 'School_term')"></filter>	
        </list>
        
        <set name="modify" table="TeacherStayTimeModify" order-by="LastModified DESC">
			<key column="ParentOid" />
			<composite-element class="tw.edu.chit.model.TeacherStayTimeModify">
				<parent name="empl" />
				<property name="schoolYear" column="SchoolYear" not-null="true" />
				<property name="schoolTerm" column="SchoolTerm" not-null="true" />
				<property name="lastModified" column="LastModified" not-null="true" />
			</composite-element>
		</set>
        
        <!-- 1對多 Mapping -->
        <list name="lifeCounseling" inverse="true" table="LifeCounseling" cascade="delete-orphan">
            <key column="parentOid" />
            <index column="Pos" />
            <one-to-many class="tw.edu.chit.model.LifeCounseling" />
        </list>
        
        <!-- 1對多 Mapping -->
        <list name="classCadre" inverse="true" cascade="all-delete-orphan"
        	table="ClassCadre">
            <key column="ParentOid" />
            <index column="pos" />
            <one-to-many class="tw.edu.chit.model.ClassCadre" />
        </list>
        
    </class>
    
    <filter-def name="yearFilterDef">
		<filter-param name="yearCondition" type="java.lang.String"/>
	</filter-def>
	
</hibernate-mapping>
